let WhatsAlexa = require('../events');
let {MessageType,Mimetype} = require('@adiwajshing/baileys');
let fs = require('fs');
let ffmpeg = require('fluent-ffmpeg');
let {execFile} = require('child_process');
let cwebp = require('cwebp-bin');
let Config = require('../config');
let Language = require('../language');
let Lang = Language.getString('conventer');

if (Config.WORKTYPE == 'private') {

    WhatsAlexa.addCommand({pattern: 'mp4audio', fromMe: true, desc: Lang.MP4TOAUDİO_DESC}, (async (message, match) => {    

    function _0x3eae(){var _0x156693=['6SEdNNP','6603916RNViWB','sendMessage','50763PMHLNn','1936QwRqLP','MP4TOAUDİO_NEEDREPLY','output.mp3','audio','reply_message','key','MP4TOAUDİO','65259zGzTiQ','29225060xtLQdb','client','quotedMessage','data','withNoVideo','mp4Audio','deleteMessage','120BuXUbJ','7974325rmDqqT','downloadAndSaveMediaMessage','64281qHTJvW','save','780081tyWHDZ','text','jid'];_0x3eae=function(){return _0x156693;};return _0x3eae();}function _0x69ab(_0x4e5a10,_0x424d85){var _0x3eae8d=_0x3eae();return _0x69ab=function(_0x69abbf,_0x13644b){_0x69abbf=_0x69abbf-0x1e1;var _0x1c7612=_0x3eae8d[_0x69abbf];return _0x1c7612;},_0x69ab(_0x4e5a10,_0x424d85);}var _0x3b6dac=_0x69ab;(function(_0x3e5648,_0x1527e8){var _0xd66b31=_0x69ab,_0x1be763=_0x3e5648();while(!![]){try{var _0x330706=parseInt(_0xd66b31(0x1e2))/0x1+parseInt(_0xd66b31(0x1f8))/0x2*(-parseInt(_0xd66b31(0x1e8))/0x3)+parseInt(_0xd66b31(0x1e6))/0x4+-parseInt(_0xd66b31(0x1f9))/0x5+-parseInt(_0xd66b31(0x1e5))/0x6*(-parseInt(_0xd66b31(0x1fb))/0x7)+parseInt(_0xd66b31(0x1e9))/0x8*(-parseInt(_0xd66b31(0x1f0))/0x9)+parseInt(_0xd66b31(0x1f1))/0xa;if(_0x330706===_0x1527e8)break;else _0x1be763['push'](_0x1be763['shift']());}catch(_0x14e327){_0x1be763['push'](_0x1be763['shift']());}}}(_0x3eae,0xf39fa));if(message[_0x3b6dac(0x1ed)]===![])return await message[_0x3b6dac(0x1f2)]['sendMessage'](message['jid'],Lang[_0x3b6dac(0x1ea)],MessageType[_0x3b6dac(0x1e3)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message['data']});var downloading=await message[_0x3b6dac(0x1f2)]['sendMessage'](message[_0x3b6dac(0x1e4)],Lang[_0x3b6dac(0x1ef)],MessageType[_0x3b6dac(0x1e3)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message[_0x3b6dac(0x1f4)]}),location=await message[_0x3b6dac(0x1f2)][_0x3b6dac(0x1fa)]({'key':{'remoteJid':message[_0x3b6dac(0x1ed)][_0x3b6dac(0x1e4)],'id':message[_0x3b6dac(0x1ed)]['id']},'message':message[_0x3b6dac(0x1ed)][_0x3b6dac(0x1f4)][_0x3b6dac(0x1f3)]});ffmpeg(location)[_0x3b6dac(0x1f5)]()[_0x3b6dac(0x1e1)]('output.mp3')['on']('end',async()=>{var _0x3dc5aa=_0x3b6dac;await message[_0x3dc5aa(0x1f2)][_0x3dc5aa(0x1e7)](message[_0x3dc5aa(0x1e4)],fs['readFileSync'](_0x3dc5aa(0x1eb)),MessageType[_0x3dc5aa(0x1ec)],{'mimetype':Mimetype[_0x3dc5aa(0x1f6)],'ptt':![],'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message[_0x3dc5aa(0x1f4)]});});return await message[_0x3b6dac(0x1f2)][_0x3b6dac(0x1f7)](message[_0x3b6dac(0x1e4)],{'id':downloading[_0x3b6dac(0x1ee)]['id'],'remoteJid':message['jid'],'fromMe':!![]});
    }));

    WhatsAlexa.addCommand({pattern: 'photo', fromMe: true, desc: Lang.STİCKER_DESC}, (async (message, match) => {   

    function _0x5558(_0x34fae6,_0x306d66){var _0x553b29=_0x553b();return _0x5558=function(_0x55584d,_0x394dbb){_0x55584d=_0x55584d-0x90;var _0x506b4e=_0x553b29[_0x55584d];return _0x506b4e;},_0x5558(_0x34fae6,_0x306d66);}var _0x4bfca9=_0x5558;(function(_0x1276f6,_0x511a5f){var _0x44398d=_0x5558,_0x434403=_0x1276f6();while(!![]){try{var _0x10daae=-parseInt(_0x44398d(0xa3))/0x1*(-parseInt(_0x44398d(0xa7))/0x2)+-parseInt(_0x44398d(0xa1))/0x3+parseInt(_0x44398d(0x96))/0x4*(parseInt(_0x44398d(0x9e))/0x5)+parseInt(_0x44398d(0x9c))/0x6*(-parseInt(_0x44398d(0x9b))/0x7)+-parseInt(_0x44398d(0x92))/0x8+-parseInt(_0x44398d(0xa2))/0x9+-parseInt(_0x44398d(0x9d))/0xa*(-parseInt(_0x44398d(0x91))/0xb);if(_0x10daae===_0x511a5f)break;else _0x434403['push'](_0x434403['shift']());}catch(_0x1e4ccc){_0x434403['push'](_0x434403['shift']());}}}(_0x553b,0x510ec));function _0x553b(){var _0x343cb9=['downloadAndSaveMediaMessage','save','1260393xgszRj','5690394MJsfdH','2126dCqahX','readFileSync','client','png','222qlroYa','key','sendMessage','webp_pipe','output.jpg','88xMtigz','2903648FrwNQn','text','jid','reply_message','2164ZOfBLt','end','data','*Made\x20By\x20WhatsAlexa*','STİCKER','14jzRQga','1723104xZczmy','2202110iKRQld','2995iuHukH'];_0x553b=function(){return _0x343cb9;};return _0x553b();}if(message[_0x4bfca9(0x95)]===![])return await message[_0x4bfca9(0xa5)][_0x4bfca9(0xa9)](message['jid'],Lang['STİCKER_NEEDREPLY'],MessageType['text'],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message['data']});var downloading=await message[_0x4bfca9(0xa5)]['sendMessage'](message[_0x4bfca9(0x94)],Lang[_0x4bfca9(0x9a)],MessageType[_0x4bfca9(0x93)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message['data']}),location=await message[_0x4bfca9(0xa5)][_0x4bfca9(0x9f)]({'key':{'remoteJid':message['reply_message'][_0x4bfca9(0x94)],'id':message[_0x4bfca9(0x95)]['id']},'message':message[_0x4bfca9(0x95)][_0x4bfca9(0x98)]['quotedMessage']});ffmpeg(location)['fromFormat'](_0x4bfca9(0xaa))[_0x4bfca9(0xa0)](_0x4bfca9(0x90))['on'](_0x4bfca9(0x97),async()=>{var _0x3cd78d=_0x4bfca9;await message[_0x3cd78d(0xa5)]['sendMessage'](message[_0x3cd78d(0x94)],fs[_0x3cd78d(0xa4)]('output.jpg'),MessageType['image'],{'mimetype':Mimetype[_0x3cd78d(0xa6)],'caption':_0x3cd78d(0x99),'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message['data']});});return await message['client']['deleteMessage'](message[_0x4bfca9(0x94)],{'id':downloading[_0x4bfca9(0xa8)]['id'],'remoteJid':message[_0x4bfca9(0x94)],'fromMe':!![]});
    }));
}
else if (Config.WORKTYPE == 'public') {

    WhatsAlexa.addCommand({pattern: 'mp4audio', fromMe: false, desc: Lang.MP4TOAUDİO_DESC}, (async (message, match) => {    

    function _0x3eae(){var _0x156693=['6SEdNNP','6603916RNViWB','sendMessage','50763PMHLNn','1936QwRqLP','MP4TOAUDİO_NEEDREPLY','output.mp3','audio','reply_message','key','MP4TOAUDİO','65259zGzTiQ','29225060xtLQdb','client','quotedMessage','data','withNoVideo','mp4Audio','deleteMessage','120BuXUbJ','7974325rmDqqT','downloadAndSaveMediaMessage','64281qHTJvW','save','780081tyWHDZ','text','jid'];_0x3eae=function(){return _0x156693;};return _0x3eae();}function _0x69ab(_0x4e5a10,_0x424d85){var _0x3eae8d=_0x3eae();return _0x69ab=function(_0x69abbf,_0x13644b){_0x69abbf=_0x69abbf-0x1e1;var _0x1c7612=_0x3eae8d[_0x69abbf];return _0x1c7612;},_0x69ab(_0x4e5a10,_0x424d85);}var _0x3b6dac=_0x69ab;(function(_0x3e5648,_0x1527e8){var _0xd66b31=_0x69ab,_0x1be763=_0x3e5648();while(!![]){try{var _0x330706=parseInt(_0xd66b31(0x1e2))/0x1+parseInt(_0xd66b31(0x1f8))/0x2*(-parseInt(_0xd66b31(0x1e8))/0x3)+parseInt(_0xd66b31(0x1e6))/0x4+-parseInt(_0xd66b31(0x1f9))/0x5+-parseInt(_0xd66b31(0x1e5))/0x6*(-parseInt(_0xd66b31(0x1fb))/0x7)+parseInt(_0xd66b31(0x1e9))/0x8*(-parseInt(_0xd66b31(0x1f0))/0x9)+parseInt(_0xd66b31(0x1f1))/0xa;if(_0x330706===_0x1527e8)break;else _0x1be763['push'](_0x1be763['shift']());}catch(_0x14e327){_0x1be763['push'](_0x1be763['shift']());}}}(_0x3eae,0xf39fa));if(message[_0x3b6dac(0x1ed)]===![])return await message[_0x3b6dac(0x1f2)]['sendMessage'](message['jid'],Lang[_0x3b6dac(0x1ea)],MessageType[_0x3b6dac(0x1e3)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message['data']});var downloading=await message[_0x3b6dac(0x1f2)]['sendMessage'](message[_0x3b6dac(0x1e4)],Lang[_0x3b6dac(0x1ef)],MessageType[_0x3b6dac(0x1e3)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message[_0x3b6dac(0x1f4)]}),location=await message[_0x3b6dac(0x1f2)][_0x3b6dac(0x1fa)]({'key':{'remoteJid':message[_0x3b6dac(0x1ed)][_0x3b6dac(0x1e4)],'id':message[_0x3b6dac(0x1ed)]['id']},'message':message[_0x3b6dac(0x1ed)][_0x3b6dac(0x1f4)][_0x3b6dac(0x1f3)]});ffmpeg(location)[_0x3b6dac(0x1f5)]()[_0x3b6dac(0x1e1)]('output.mp3')['on']('end',async()=>{var _0x3dc5aa=_0x3b6dac;await message[_0x3dc5aa(0x1f2)][_0x3dc5aa(0x1e7)](message[_0x3dc5aa(0x1e4)],fs['readFileSync'](_0x3dc5aa(0x1eb)),MessageType[_0x3dc5aa(0x1ec)],{'mimetype':Mimetype[_0x3dc5aa(0x1f6)],'ptt':![],'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message[_0x3dc5aa(0x1f4)]});});return await message[_0x3b6dac(0x1f2)][_0x3b6dac(0x1f7)](message[_0x3b6dac(0x1e4)],{'id':downloading[_0x3b6dac(0x1ee)]['id'],'remoteJid':message['jid'],'fromMe':!![]});
    }));

    WhatsAlexa.addCommand({pattern: 'photo', fromMe: false, desc: Lang.STİCKER_DESC}, (async (message, match) => {   

    function _0x5558(_0x34fae6,_0x306d66){var _0x553b29=_0x553b();return _0x5558=function(_0x55584d,_0x394dbb){_0x55584d=_0x55584d-0x90;var _0x506b4e=_0x553b29[_0x55584d];return _0x506b4e;},_0x5558(_0x34fae6,_0x306d66);}var _0x4bfca9=_0x5558;(function(_0x1276f6,_0x511a5f){var _0x44398d=_0x5558,_0x434403=_0x1276f6();while(!![]){try{var _0x10daae=-parseInt(_0x44398d(0xa3))/0x1*(-parseInt(_0x44398d(0xa7))/0x2)+-parseInt(_0x44398d(0xa1))/0x3+parseInt(_0x44398d(0x96))/0x4*(parseInt(_0x44398d(0x9e))/0x5)+parseInt(_0x44398d(0x9c))/0x6*(-parseInt(_0x44398d(0x9b))/0x7)+-parseInt(_0x44398d(0x92))/0x8+-parseInt(_0x44398d(0xa2))/0x9+-parseInt(_0x44398d(0x9d))/0xa*(-parseInt(_0x44398d(0x91))/0xb);if(_0x10daae===_0x511a5f)break;else _0x434403['push'](_0x434403['shift']());}catch(_0x1e4ccc){_0x434403['push'](_0x434403['shift']());}}}(_0x553b,0x510ec));function _0x553b(){var _0x343cb9=['downloadAndSaveMediaMessage','save','1260393xgszRj','5690394MJsfdH','2126dCqahX','readFileSync','client','png','222qlroYa','key','sendMessage','webp_pipe','output.jpg','88xMtigz','2903648FrwNQn','text','jid','reply_message','2164ZOfBLt','end','data','*Made\x20By\x20WhatsAlexa*','STİCKER','14jzRQga','1723104xZczmy','2202110iKRQld','2995iuHukH'];_0x553b=function(){return _0x343cb9;};return _0x553b();}if(message[_0x4bfca9(0x95)]===![])return await message[_0x4bfca9(0xa5)][_0x4bfca9(0xa9)](message['jid'],Lang['STİCKER_NEEDREPLY'],MessageType['text'],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message['data']});var downloading=await message[_0x4bfca9(0xa5)]['sendMessage'](message[_0x4bfca9(0x94)],Lang[_0x4bfca9(0x9a)],MessageType[_0x4bfca9(0x93)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message['data']}),location=await message[_0x4bfca9(0xa5)][_0x4bfca9(0x9f)]({'key':{'remoteJid':message['reply_message'][_0x4bfca9(0x94)],'id':message[_0x4bfca9(0x95)]['id']},'message':message[_0x4bfca9(0x95)][_0x4bfca9(0x98)]['quotedMessage']});ffmpeg(location)['fromFormat'](_0x4bfca9(0xaa))[_0x4bfca9(0xa0)](_0x4bfca9(0x90))['on'](_0x4bfca9(0x97),async()=>{var _0x3cd78d=_0x4bfca9;await message[_0x3cd78d(0xa5)]['sendMessage'](message[_0x3cd78d(0x94)],fs[_0x3cd78d(0xa4)]('output.jpg'),MessageType['image'],{'mimetype':Mimetype[_0x3cd78d(0xa6)],'caption':_0x3cd78d(0x99),'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message['data']});});return await message['client']['deleteMessage'](message[_0x4bfca9(0x94)],{'id':downloading[_0x4bfca9(0xa8)]['id'],'remoteJid':message[_0x4bfca9(0x94)],'fromMe':!![]});
    }));
}
